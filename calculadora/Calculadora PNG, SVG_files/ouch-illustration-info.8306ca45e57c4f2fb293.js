(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{1219:function(t,i,s){var l=s(1577);l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,s(9).default)("695143bc",l,!0,{sourceMap:!1})},1576:function(t,i,s){"use strict";s(1219)},1577:function(t,i,s){var l=s(8)((function(t){return t[1]}));l.push([t.i,".same-style-illustrations[data-v-40b631c3]{padding:32px 30px 16px}@media(max-width:576px){.same-style-illustrations[data-v-40b631c3]{padding:32px 20px 16px}}.same-style-illustrations h2[data-v-40b631c3]{font-size:18px;font-weight:700;letter-spacing:-.09px;line-height:24px;margin-bottom:16px}.same-style-illustrations h2[data-v-40b631c3] .link{font-size:18px;font-weight:700;letter-spacing:-.09px;line-height:24px}",""]),l.locals={},t.exports=l},1704:function(t,i,s){"use strict";s.r(i);var l=s(935),e=s(154);const a=50;var n={name:"OuchSameStyleIllustrations",components:{OuchIllustrationsList:l["default"]},mixins:[e["a"]],props:{illustration:{type:Object,default:()=>({})},sameStyleillustrations:{type:Array,default:()=>[]},total:{type:Number,default:0},loading:{type:Boolean,default:!1},illustrationPage:{type:Boolean,default:!1}},data:()=>({illustrations:[],perPage:a}),computed:{stylePrettyId(){var t,i,s;return(null===(t=this.illustration)||void 0===t||null===(i=t.styles)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.pretty_id)||""},styleTitle(){var t,i,s;return(null===(t=this.illustration)||void 0===t||null===(i=t.styles)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.title)||""},title(){return this.styleTitle?this.$t("OUCH_V2.FULL_ILLUSTRATION.RELATED_IN_STYLE",{link:this.url,style:this.styleTitle}):this.$t("OUCH_V2.FULL_ILLUSTRATION.RELATED")},url(){var t,i;return`https://${(null===(t=this.$i18n)||void 0===t||null===(i=t.localeProperties)||void 0===i?void 0:i.domain)||document.location.host}/illustrations/style--${this.stylePrettyId}`}},watch:{sameStyleillustrations(t){this.illustrations=t}},created(){this.illustrations=[...this.sameStyleillustrations]},methods:{fetch(){const t={page:this.page+1,per_page:this.perPage,style_pretty_ids:this.illustrations[0].styles[0].pretty_id,locale:this.$i18n.localeProperties.iso};this.nextPage({entity:"illustrations",params:t,extraParams:{id:this.illustration.id,affix:"similars"}})},onTitleClick(t){if("link"===t.target.className){const t=this.url.split("/style--")[1],i=`/illustrations/style--${t}`;if(this.$route.fullPath.includes(`style--${t}`))return;this.$ouchModal.hide("illustration"),this.$nextTick((()=>{this.$router.push(i)}))}}}},o=(s(1576),s(6)),r=Object(o["a"])(n,(function(){var t=this,i=t._self._c;return t.sameStyleillustrations.length?i("div",{staticClass:"same-style-illustrations"},[i("h2",{domProps:{innerHTML:t._s(t.title)},on:{click:function(i){return i.preventDefault(),i.stopPropagation(),t.onTitleClick.apply(null,arguments)}}}),i("ouch-illustrations-list",{class:{"illustration-page":t.illustrationPage},attrs:{illustrations:t.illustrations,"is-adding-illustrations":t.isAddingIllustrations,total:t.total,loading:t.loading}}),!t.loading&&t.illustrations.length&&(t.page*t.perPage<this.total||t.nextPageLoading)?i("ouch-pagination",{attrs:{entity:"illustrations",page:t.page,perPage:t.perPage,loading:t.nextPageLoading,total:t.total},on:{nextPage:t.fetch}}):t._e()],1):t._e()}),[],!1,null,"40b631c3",null);i["default"]=r.exports},918:function(t,i,s){var l=s(925);l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,s(9).default)("43c8cea8",l,!0,{sourceMap:!1})},921:function(t,i,s){var l=s(932);l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,s(9).default)("0eb437fe",l,!0,{sourceMap:!1})},922:function(t,i,s){var l=s(934);l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,s(9).default)("71ff1894",l,!0,{sourceMap:!1})},924:function(t,i,s){"use strict";s(918)},925:function(t,i,s){var l=s(8)((function(t){return t[1]}));l.push([t.i,".masonry[data-v-424a9435]{align-items:flex-start;overflow:hidden}.masonry[data-v-424a9435]>div{display:flex;flex-direction:column}",""]),l.locals={},t.exports=l},926:function(t,i,s){"use strict";var l={name:"OuchMasonry",props:{items:{type:Array,default:()=>[]},cols:{type:[Object,Number,String],default:3},gutter:{type:[Object,Number,String],default:0}},mounted(){this.$nextTick((()=>{this.$emit("load")}))}},e=(s(924),s(6)),a=Object(e["a"])(l,(function(){var t=this;return(0,t._self._c)("masonry",{staticClass:"masonry",attrs:{cols:t.cols,"default-display-columns":t.cols,gutter:t.gutter}},[t._t("default")],2)}),[],!1,null,"424a9435",null);i["a"]=a.exports},931:function(t,i,s){"use strict";s(921)},932:function(t,i,s){var l=s(8)((function(t){return t[1]}));l.push([t.i,".illustrations-grid[data-v-a394e1b2]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,auto));position:relative}@media(max-width:980px){.illustrations-grid[data-v-a394e1b2]{grid-template-columns:repeat(auto-fit,minmax(240px,auto))}}@media(max-width:576px){.illustrations-grid[data-v-a394e1b2]{grid-template-columns:repeat(2,1fr)}}",""]),l.locals={},t.exports=l},933:function(t,i,s){"use strict";s(922)},934:function(t,i,s){var l=s(8)((function(t){return t[1]}));l.push([t.i,".illustrations-list[data-v-3c06505e]{position:relative}.illustrations-list--loading[data-v-3c06505e]{grid-gap:16px;display:grid;gap:16px}.illustrations-list--loading .masonry[data-v-3c06505e]{display:none!important}.illustrations-list--loading .illustration[data-v-3c06505e]{margin-bottom:0!important}.illustrations-list__gradient[data-v-3c06505e]{background:linear-gradient(0deg,#fff,#fff0);bottom:0;height:80px;position:absolute;width:100%;z-index:2}.illustrations-list .illustration[data-v-3c06505e]{padding-top:0}.illustrations-list .illustration[data-v-3c06505e]:not(:last-of-type){margin-bottom:16px}",""]),l.locals={},t.exports=l},935:function(t,i,s){"use strict";s.r(i);var l=s(15),e=s(88),a=s.n(e),n=s(89),o=s(936),r=s(939),u=s(923),d=s(950),h={name:"OuchIllustrationsGrid",props:{gutter:{type:Number,default:16}},computed:{gridStyles(){return{gridGap:`${this.gutter}px`}}}},c=(s(931),s(6)),p={name:"OuchIllustrationsList",components:{"ouch-illustrations-grid":Object(c["a"])(h,(function(){var t=this;return(0,t._self._c)("div",{staticClass:"illustrations-grid",style:t.gridStyles},[t._t("default")],2)}),[],!1,null,"a394e1b2",null).exports,OuchMasonry:s(926)["a"],OuchIllustration:d["a"]},mixins:[o["a"]],props:{hasComponents:{type:Boolean,default:!1},hasLcpImage:{type:Boolean,default:!1},illustrations:{type:Array,default:()=>[]},image:{type:[Object,null],default:null},isAddingIllustrations:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},openIllustrationOnPage:{type:Boolean,default:!1},preventCropBelow:{type:Boolean,default:!1},total:{type:Number,default:0}},data:()=>({currentIndex:0,columns:7,illustrationWidth:0,isMasonryLoaded:!1,isClient:!1,listId:null,onIllustrationsChange:null}),computed:{...Object(l["e"])({activeList:t=>t.activeList,illustrationIndexOffset:t=>t.illustrationIndexOffset,illustrationNavDirection:t=>t.illustrationNavDirection,modalActive:t=>t.modalActive,preloadImages:t=>t.preloadImage,user:t=>t.auth.user,windowWidth:t=>t.windowWidth,windowHeight:t=>t.windowHeight}),...Object(l["c"])(["isLcpImage"]),listGridComponent(){return this.isClient?"ouch-masonry":"ouch-illustrations-grid"},showGradientBar(){return!this.hasComponents&&!this.preventCropBelow&&this.illustrations.length<this.total}},watch:{illustrationIndexOffset(t){this._uid===this.activeList&&this.openModal(t)},illustrations(){this.onIllustrationsChange()},isMasonryLoaded(t){t&&this.$nextTick(this.setIllustrationsHeight)},isAddingIllustrations(t){t&&this.setIllustrationsProps({height:"auto",overflow:"unset",marginBottom:16})}},mounted(){this.isClient=!0,this.listId=Object(r["a"])();const t=this;this.onIllustrationsChange=a()((function(){t.setIllustrationsHeight()}),500)},methods:{...Object(l["b"])(["setIllustrationIndexOffset","setActiveList"]),authUser(){Object(n["g"])()},illustrationLink:t=>Object(u["a"])(t),onMasonryLoad(){this.isMasonryLoaded=!0,this.$root.$emit("masonry loaded")},openIllustration(t){var i;this.openIllustrationOnPage?this.$router.push(`/illustrations/illustration/${this.illustrations[t].pretty_id}${null!==(i=this.illustrations[t].json)&&void 0!==i&&i.url?"--animated":""}`):this.openIllustrationModal(t)},openIllustrationModal(t){this.currentIndex=t,this.setIllustrationIndexOffset(0),this.setActiveList(this._uid),this.openModal()},setIllustrationsHeight(){this.hasComponents||this.preventCropBelow||this.$nextTick((()=>{this.illustrations.length>=this.total&&!this.cropBelow||this.setIllustrationsProps({height:this.getIllustrationsHeightOffset(),overflow:"hidden"})}))},setIllustrationsProps(t){let{height:i,overflow:s="hidden",marginBottom:l=0}=t;const e=document.querySelector(`.illustrations-list[data-list='${this.listId}']`);e&&(e.style.height="number"==typeof i?`${e.offsetHeight-i}px`:"auto",e.style.overflow=s,e.style.marginBottom=`${l}px`)},getIllustrationsHeightOffset(){const t=[];document.querySelectorAll(`.illustrations-list[data-list='${this.listId}'] .masonry > div > .illustration:last-child`).forEach((i=>{const{y:s,height:l}=i.getBoundingClientRect();t.push(s+l)}));const i=Math.min(...t);return Math.max(...t)-i},openModal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const i=this.hasPreviousIllustration(t,this.hasComponents),s=this.hasNextIllustration(t,this.hasComponents);this.$ouchModal.hide("download"),this.showNextIllustration(t,i,s)},hasNextIllustration(t,i){const s=this.currentIndex+t;if(s>=this.illustrations.length-1||i)return!1;return!!this.illustrations.slice(s+1).find((t=>t.pretty_id))},hasPreviousIllustration(t,i){const s=this.currentIndex+t;if(s<=0||i)return!1;return!!this.illustrations.slice(0,s).find((t=>t.pretty_id))},showNextIllustration(t,i,s){var l,e,a;const n=this.illustrations[this.currentIndex+t];null!=n&&n.id&&(!(this.illustrationNavDirection>0)||null!=n&&n.pretty_id?!(this.illustrationNavDirection<0)||null!=n&&n.pretty_id?this.$ouchModal.show("illustration",{illustration:n,hasPrev:i,hasNext:s,thumb:{maxWidth:null==n||null===(l=n.preview1x)||void 0===l?void 0:l.width,maxHeight:null==n||null===(e=n.preview1x)||void 0===e?void 0:e.height,url:null==n||null===(a=n.thumb1x)||void 0===a?void 0:a.url}}):this.setIllustrationIndexOffset(this.illustrationIndexOffset-1):this.setIllustrationIndexOffset(this.illustrationIndexOffset+1))}}},g=p,f=(s(933),Object(c["a"])(g,(function(){var t=this,i=t._self._c;return i("div",{staticClass:"illustrations-list",attrs:{"data-list":t.listId}},[t.showGradientBar?i("div",{staticClass:"illustrations-list__gradient"}):t._e(),i(t.listGridComponent,{tag:"component",attrs:{cols:t.columns,gutter:16},on:{load:t.onMasonryLoad}},[t.image?i("ouch-illustration",{key:t.image.id,attrs:{scaled:"",link:`/illustrations/image--${t.image.id}`,upload:t.image}}):t._e(),t._l(t.illustrations,(function(s,l){return i("ouch-illustration",{key:`${s.id}--${l}`,attrs:{scaled:"",columns:t.columns,"first-illustration":!l,index:l,illustration:s,"lcp-image":t.isLcpImage(s)&&t.hasLcpImage,link:t.illustrationLink(s),user:t.user,"window-width":t.windowWidth,"window-height":t.windowHeight},on:{"change-card-width":function(i){t.illustrationWidth=i},open:t.openIllustration,"open:auth":t.authUser}})}))],2)],1)}),[],!1,null,"3c06505e",null));i["default"]=f.exports}}]);